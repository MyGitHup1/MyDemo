webpackJsonp([10],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App",data:function(){return{}}},i,!1,function(e){n("YTMl")},null,null).exports,r=n("Gu7T"),s=n.n(r),c=n("/ocq"),l=n("Dd8w"),u=n.n(l),d=n("NYxO"),m=n("o/zv"),h=n.n(m),p={name:"SidebarItem",props:["item","basePath"],data:function(){return{d:null}},methods:{hasChild:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],a=t.filter(function(t){return!!t&&(e.d=t,!0)});return 0===a.length?(this.d=u()({},n),!0):1===a.length},resolvePath:function(e){return h.a.resolve(this.basePath,e)}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hasChild(e.item.children,e.item)?n("el-menu-item",{attrs:{index:e.resolvePath(e.basePath)}},[n("span",[e._v(e._s(e.d&&e.d.meta&&e.d.meta.title))])]):n("el-submenu",{attrs:{index:e.basePath}},[n("template",{slot:"title"},[n("span",[e._v(e._s(e.item.meta.title))])]),e._v(" "),e._l(e.item.children,function(t){return n("sidebar-item",{key:t.path,attrs:{item:t,"base-path":e.resolvePath(t.path)}})})],2)],1)},staticRenderFns:[]},v={name:"slider",data:function(){return{msg:"Welcome to Your Vue.js App",isCollapse:!1}},components:{SidebarItem:n("VU/8")(p,f,!1,null,null,null).exports},computed:u()({},Object(d.b)(["permission_routes"])),methods:{toActive:function(){}},mounted:function(){this.toActive()}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"slider"},[t("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"unique-opened":"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:""}},this._l(this.permission_routes,function(e){return t("sidebar-item",{key:e.path,attrs:{item:e,"base-path":e.path}})}),1)],1)},staticRenderFns:[]};var b=n("VU/8")(v,g,!1,function(e){n("lH7M")},"data-v-3a6f5ac8",null).exports,w=n("vLgD"),_={data:function(){return{msg:"Welcome to Your Vue.js App",navs:[],content:"隐藏侧边栏"}},methods:{isShowSlider:function(){this.$store.state.isShowSlider=!this.$store.state.isShowSlider,this.$store.state.setSlider();var e=this.$refs.i;"el-icon-s-fold"===e.className&&"隐藏侧边栏"===this.content?(e.className="el-icon-s-unfold",this.content="显示侧边栏"):(e.className="el-icon-s-fold",this.content="隐藏侧边栏")},getRouter:function(){this.$route.matched&&(this.navs=this.$route.matched)},handleCommand:function(e){var t=this;"loginOut"===e&&w.a.post("/api/user/logout").then(function(e){t.$router.push("/login"),console.log("已退出",e),t.$store.dispatch("Logout")}).catch(function(e){t.$router.push("/login"),console.log("退出错误",e)})}},created:function(){this.getRouter()},watch:{$route:function(){this.getRouter()}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navs"},[n("div",{staticClass:"sliderShow",on:{click:e.isShowSlider}},[n("el-popover",{attrs:{placement:"top-start",content:e.content,trigger:"hover"}},[n("el-button",{staticStyle:{border:"0"},attrs:{slot:"reference"},slot:"reference"},[e._t("default",[n("i",{ref:"i",staticClass:"el-icon-s-fold"})])],2)],1)],1),e._v(" "),n("div",{staticClass:"nav"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.navs,function(t,a){return n("el-breadcrumb-item",{directives:[{name:"show",rawName:"v-show",value:e.navs[a].meta.title,expression:"navs[i].meta.title"}],key:a},[e._v(e._s(t.meta.title))])}),1)],1),e._v(" "),n("div",{staticClass:"right"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommand}},[n("el-button",{attrs:{plain:"",type:"text"}},[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"loginOut"}},[e._v("退出")])],1)],1)],1)])},staticRenderFns:[]};var x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("keep-alive",[this.$route.meta.keeplive?t("router-view"):this._e()],1),this._v(" "),this.$route.meta.keeplive?this._e():t("router-view")],1)},staticRenderFns:[]};var k={name:"layout",data:function(){return{msg:"Welcome to Your Vue.js App",isShowSlider:"230px"}},methods:{setSlider:function(){switch(this.$store.state.isShowSlider){case!0:this.isShowSlider="230px";break;case!1:this.isShowSlider="0"}}},components:{Slider:b,Navs:n("VU/8")(_,S,!1,function(e){n("bkXy")},"data-v-7c52d01f",null).exports,Mains:n("VU/8")({data:function(){return{msg:"Welcome to Your Vue.js App"}}},x,!1,function(e){n("ojiR")},"data-v-6694818e",null).exports},mounted:function(){this.$store.state.setSlider=this.setSlider}},E={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-aside",{attrs:{width:this.isShowSlider}},[t("Slider")],1),this._v(" "),t("el-container",[t("el-header",{attrs:{height:""}},[t("Navs")],1),this._v(" "),t("el-main",[t("Mains")],1)],1)],1)},staticRenderFns:[]};var y=n("VU/8")(k,E,!1,function(e){n("vr1Z")},"data-v-285dc08e",null).exports,T=[{path:"/login",name:"login",component:function(){return n.e(5).then(n.bind(null,"YTIe"))}},{path:"/",name:"layout",component:y,redirect:"/home",children:[{path:"home",name:"home",component:function(){return n.e(0).then(n.bind(null,"+3bb"))},meta:{title:"首页"}}]}],R=n("hU7x"),C=n.n(R),$=n("XLwt"),O=n.n($),L=(n("Bhwq"),{name:"yqdt",data:function(){return{src:"http://api.map.baidu.com/api?v=3.0&ak=UeQLrLFd65lBnKiUqXhyjoLXmgLUi3mV&callback=initialize",option:{title:{text:"疫情地图",link:"http://www.baidu.com",x:"center"},tooltip:{formatter:"地区：{b} </br> 确诊：{c}"},series:[{type:"map",map:"china",label:{show:!0,color:"red"},zoom:1,itemStyle:{areaColor:"green"},data:[{name:"北京",value:10001},{name:"陕西",value:1001},{name:"湖北",value:101},{name:"四川",value:11},{name:"西藏",value:1},{name:"内蒙古",value:0}]}],visualMap:{type:"piecewise",pieces:[{min:1e4},{min:1e3,max:9999},{min:100,max:999},{min:10,max:99},{min:1,max:9},{value:0,color:"#F8F9FA"}],realtime:!0,calculable:!0,inRange:{color:["#F8F9FA","#660208"]},itemWidth:"20px",itemHeight:"20px",right:0,top:0,align:"left"}}}},methods:{createMap:function(){var e=O.a.init(this.$refs.dituContent);e.setOption(this.option),window.onresize=function(){e.resize()}},getData:function(){var e=this;C()("https://interface.sina.cn/news/wap/fymap2020_data.d.json?_=1586155717896",function(t,n){e.option.series[0].data=n.data.list,e.createMap()})}},mounted:function(){this.getData()}}),j={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ditu"},[t("div",{ref:"dituContent",staticClass:"dituContent"})])},staticRenderFns:[]};var F=n("VU/8")(L,j,!1,function(e){n("bTyf")},null,null).exports;a.default.use(c.a);var M=new c.a({routes:[].concat(s()(T),[{path:"/yqdt",name:"yqdt",component:F}])}),A=n("zL8q"),U=n.n(A),N=(n("tvR6"),n("mtWM"),n("WXYk")),V=n("Xxa5"),W=n.n(V),Y=n("exGp"),q=n.n(Y),P=n("//Fk"),X=n.n(P),z={state:{token:N.a.get(),roles:[]},getters:{token:function(e){return e.token},roles:function(e){return e.roles}},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_ROLES:function(e,t){e.roles=t}},actions:{SET_TOKEN:function(e,t){(0,e.commit)("SET_TOKEN",t)},SET_ROLES:function(e,t){(0,e.commit)("SET_ROLES",t)},GetInfo:function(e){var t=e.commit;return new X.a(function(e,n){w.a.get("/api/user/info").then(function(n){console.log("成功获取用户信息",n),t("SET_ROLES",n.data.data.roles),e(n.data.data)}).catch(function(e){console.log(e),n(e)})})},Logout:function(e){var t=e.commit;N.a.remove(),t("SET_TOKEN",""),t("SET_ROLES",[])}}},G=[{path:"/permission",name:"layout",component:y,redirect:"/permission/createAdmin",meta:{title:"权限管理"},children:[{path:"createAdmin",name:"createAdmin",component:function(){return n.e(8).then(n.bind(null,"crgP"))},meta:{title:"创建管理员",keeplive:!0}},{path:"showLists",name:"showLists",component:function(){return n.e(7).then(n.bind(null,"5Z7u"))},meta:{title:"列表展示"}}]}],D=[{path:"/loan-input",name:"layout",component:y,redirect:"/loan-input/index",meta:{title:"贷款申请",roles:["input"]},children:[{path:"index",name:"index",component:function(){return n.e(6).then(n.bind(null,"bu3J"))},meta:{title:"贷款申请",keeplive:!0}}]},{path:"/input-manager",name:"layout",component:y,redirect:"/input-manager/index",meta:{title:"申请管理",roles:["input"]},children:[{path:"index",name:"index",component:function(){return n.e(3).then(n.bind(null,"8nJg"))},meta:{title:"申请管理",roles:["input"]}}]},{path:"/approve",name:"layout",component:y,meta:{title:"贷款审批",roles:["approve"]},children:[{path:"first",name:"first",component:function(){return n.e(2).then(n.bind(null,"aGzn"))},meta:{title:"初审"}},{path:"final",name:"final",component:function(){return n.e(1).then(n.bind(null,"DrOE"))},meta:{title:"终审"}}]},{path:"/obj-manage",name:"layout",component:y,redirect:"/obj-manage/index",children:[{path:"index",name:"index",component:function(){return n.e(4).then(n.bind(null,"QZCv"))},meta:{title:"标的管理"}}]}].concat(s()(G));var H={state:{routes:[]},getters:{permission_routes:function(e){return e.routes}},mutations:{SET_ROUTES:function(e,t){e.routes=T.concat(t)}},actions:{GenerateRoutes:function(e,t){var n=e.commit;return new X.a(function(e,a){var i=void 0;i=t.includes("administrator")?D:function(e,t){var n=[];return console.log(e),e.forEach(function(e){e.meta&&e.meta.roles&&t.some(function(t){return e.meta.roles.includes(t)})&&n.push(e)}),n}(D,t),n("SET_ROUTES",i),e(i)})}}};a.default.use(d.a);var I,K=new d.a.Store({modules:{user:z,permission:H},state:{isShowSlider:!0}}),Z=this;M.beforeEach((I=q()(W.a.mark(function e(t,n,a){var i,o,r,s;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("要到哪里去",t),"/login"!=t.path){e.next=5;break}a(),e.next=29;break;case 5:if(!(K&&K.getters.roles&&K.getters.roles.length>0)){e.next=10;break}a(),e.next=29;break;case 10:return e.prev=10,e.next=13,K.dispatch("GetInfo");case 13:return i=e.sent,o=i.roles,r=o.map(function(e){return e.name}),console.log(r),e.next=19,K.dispatch("GenerateRoutes",r);case 19:s=e.sent,M.addRoutes(s),a(u()({},t)),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(10),console.log(e.t0),A.Message.error("token失效"),a({path:"/login"});case 29:a();case 30:case"end":return e.stop()}},e,Z,[[10,24]])})),function(e,t,n){return I.apply(this,arguments)})),a.default.prototype.$message=U.a.Message,a.default.use(U.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:M,store:K,components:{App:o},template:"<App/>"})},WXYk:function(e,t,n){"use strict";var a=n("lbHh"),i=n.n(a),o={defaultToken:"Admin-Token",set:function(e){i.a.set(this.defaultToken,e)},get:function(){return i.a.get(this.defaultToken)},remove:function(){i.a.remove(this.defaultToken)}};t.a=o},YTMl:function(e,t){},bTyf:function(e,t){},bkXy:function(e,t){},lH7M:function(e,t){},ojiR:function(e,t){},tvR6:function(e,t){},vLgD:function(e,t,n){"use strict";var a=n("//Fk"),i=n.n(a),o=n("mtWM"),r=n.n(o),s=n("WXYk"),c=n("zL8q"),l=(n.n(c),r.a.create({baseURL:"http://47.96.117.121:5003",withCredentials:!0}));l.interceptors.request.use(function(e){return s.a.get()&&(e.headers.token=s.a.get()),e},function(e){return i.a.reject(e)}),l.interceptors.response.use(function(e){if(2e4===e.data.code)return e;if(-1===e.config.url.search("static"))throw Object(c.Message)({message:"请先登录",type:"error"}),new Error("请先登录")},function(e){return Object(c.Message)({message:e,type:"error",iconClass:"el-icon-error",duration:2e3,showClose:!0}),i.a.reject(e)}),t.a=l},vr1Z:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.43ac0c6ca83fca4a3c39.js.map